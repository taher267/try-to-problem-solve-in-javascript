<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Title</title>
</head>
<body>
	<div class="output" style="min-height: 125px;">
		<table border="1" width="300px" height="400px" style="text-align: center;">
			<caption>Calculator</caption>
			<thead>
				<tr><th colspan="4" id="result" height="40"></th></tr>
			</thead>
			<tbody>
				<tr><td onclick="showVal(this)">7</td><td onclick="showVal(this)">8</td><td onclick="showVal(this)">9</td><td onclick="showVal(this)">+</td></tr>
				<tr><td onclick="showVal(this)">4</td><td onclick="showVal(this)">5</td><td onclick="showVal(this)">6</td><td onclick="showVal(this)">-</td></tr>
				<tr><td onclick="showVal(this)">1</td><td onclick="showVal(this)">2</td><td onclick="showVal(this)">3</td><td onclick="showVal(this)">*</td></tr>
				<tr><td onclick="showVal(this)">0</td><td onclick="showVal(this)">.</td><td onclick="showVal(this)">=</td><td onclick="showVal(this)">/</td></tr>
			</tbody>
		</table>
	</div>
	<script>
		
// function sum(n) {
//     if (n === 0) {
//         return 0;
//     } else {
//         return sum(n - 1) + n;
//     }
// }

// console.log(sum(3));
	</script>
	<script>
		function showVal(selector) {
			const select = selector.childNodes[0].nodeValue;
			const operators = ['+','-','*','/'];
			const numbers = ['1',"2","3","4","5","6","7","8","9","0"];
			const result = document.querySelector('#result');
			const resultVal = result.innerText;
			const isNumberSelector =isNaN(select);
				const prevResultVal = resultVal?resultVal:'';
				const allInputsRgx = prevResultVal.split(/[+\-/*//]/);
				const isExistDot = allInputsRgx[allInputsRgx.length-1];

				if (prevResultVal.trim() && isNumberSelector && !operators.includes(resultVal.slice(-1)) && select!='.' && select!='=' ) {
					result.innerText=prevResultVal+select;
				}else {
					if (numbers.includes(select) && !operators.includes(select)) {
						result.innerText=prevResultVal+select;
					}else if (select==='=' && prevResultVal.trim() && !operators.includes(prevResultVal.slice(0, -1)) && prevResultVal.slice(-1)!='.') {
						result.innerText = eval(prevResultVal);
					}
				}
				if (select==='.') {
					if (!prevResultVal.trim() || operators.includes(prevResultVal.slice(-1))) {
						result.innerText =prevResultVal.trim()+'0.'
					}else if (isExistDot.indexOf('.')=='-1') {
						result.innerText =prevResultVal.trim()+"."
					}
				}
				
		}
	</script>
</body>
</html>
